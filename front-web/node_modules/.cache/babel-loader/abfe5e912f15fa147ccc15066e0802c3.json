{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"C:/workspaces/ws-sds2/dsdeliver/front-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/workspaces/ws-sds2/dsdeliver/front-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/workspaces/ws-sds2/dsdeliver/front-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import{MapContainer,TileLayer,Marker,Popup}from'react-leaflet';import AsyncSelect from'react-select/async';import{fetchLocalMapBox}from'../api';var initialPosition={lat:-25.5186292,lng:-49.2317634};function OrderLocation(_ref){var onChangeLocation=_ref.onChangeLocation;var _useState=useState({position:initialPosition}),_useState2=_slicedToArray(_useState,2),address=_useState2[0],setAddress=_useState2[1];var loadOptions=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(inputValue,callback){var response,places;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetchLocalMapBox(inputValue);case 2:response=_context.sent;places=response.data.features.map(function(item){return{label:item.place_name,value:item.place_name,position:{lat:item.center[1],lng:item.center[0]}};});callback(places);case 5:case\"end\":return _context.stop();}}},_callee);}));return function loadOptions(_x,_x2){return _ref2.apply(this,arguments);};}();var handleChangeSelect=function handleChangeSelect(place){setAddress(place);onChangeLocation({latitude:place.position.lat,longitude:place.position.lng,address:place.label});};return/*#__PURE__*/_jsx(\"div\",{className:\"order-location-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"order-location-content\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"order-location-title\",children:\"Selecione onde o pedido  deve ser entregue:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-container\",children:/*#__PURE__*/_jsx(AsyncSelect,{placeholder:\"DIGITE UM ENDERE\\xC7O PARA ENTREGAR O PEDIDO\",className:\"filter\",loadOptions:loadOptions,onChange:function onChange(value){return handleChangeSelect(value);}})}),/*#__PURE__*/_jsxs(MapContainer,{center:address.position,zoom:13,scrollWheelZoom:true,children:[/*#__PURE__*/_jsx(TileLayer,{attribution:\"\\xA9 <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),/*#__PURE__*/_jsx(Marker,{position:address.position,children:/*#__PURE__*/_jsx(Popup,{children:address.label})})]},address.position.lat)]})});}export default OrderLocation;","map":{"version":3,"sources":["C:/workspaces/ws-sds2/dsdeliver/front-web/src/Orders/OrderLocation.tsx"],"names":["useState","MapContainer","TileLayer","Marker","Popup","AsyncSelect","fetchLocalMapBox","initialPosition","lat","lng","OrderLocation","onChangeLocation","position","address","setAddress","loadOptions","inputValue","callback","response","places","data","features","map","item","label","place_name","value","center","handleChangeSelect","place","latitude","longitude"],"mappings":"qjBAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,OAASC,YAAT,CAAuBC,SAAvB,CAAkCC,MAAlC,CAA0CC,KAA1C,KAAuD,eAAvD,CACA,MAAOC,CAAAA,WAAP,KAAwB,oBAAxB,CACA,OAASC,gBAAT,KAAiC,QAAjC,CAGA,GAAMC,CAAAA,eAAe,CAAG,CACtBC,GAAG,CAAE,CAAC,UADgB,CAEtBC,GAAG,CAAE,CAAC,UAFgB,CAAxB,CAkBA,QAASC,CAAAA,aAAT,MAAoD,IAA3BC,CAAAA,gBAA2B,MAA3BA,gBAA2B,eACpBX,QAAQ,CAAQ,CAC5CY,QAAQ,CAAEL,eADkC,CAAR,CADY,wCAC3CM,OAD2C,eAClCC,UADkC,eAKlD,GAAMC,CAAAA,WAAW,2FAAG,iBAAOC,UAAP,CAA2BC,QAA3B,4JACKX,CAAAA,gBAAgB,CAACU,UAAD,CADrB,QACZE,QADY,eAGZC,MAHY,CAGHD,QAAQ,CAACE,IAAT,CAAcC,QAAd,CAAuBC,GAAvB,CAA2B,SAACC,IAAD,CAAe,CACvD,MAAQ,CACNC,KAAK,CAAED,IAAI,CAACE,UADN,CAENC,KAAK,CAAEH,IAAI,CAACE,UAFN,CAGNb,QAAQ,CAAE,CACRJ,GAAG,CAAEe,IAAI,CAACI,MAAL,CAAY,CAAZ,CADG,CAERlB,GAAG,CAAEc,IAAI,CAACI,MAAL,CAAY,CAAZ,CAFG,CAHJ,CAAR,CASD,CAVc,CAHG,CAelBV,QAAQ,CAACE,MAAD,CAAR,CAfkB,sDAAH,kBAAXJ,CAAAA,WAAW,iDAAjB,CAkBA,GAAMa,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,KAAD,CAAkB,CAC3Cf,UAAU,CAACe,KAAD,CAAV,CACAlB,gBAAgB,CAAC,CACfmB,QAAQ,CAAED,KAAK,CAACjB,QAAN,CAAeJ,GADV,CAEfuB,SAAS,CAAEF,KAAK,CAACjB,QAAN,CAAeH,GAFX,CAGfI,OAAO,CAAEgB,KAAK,CAACL,KAHA,CAAD,CAAhB,CAKD,CAPD,CAUA,mBACE,YAAK,SAAS,CAAC,0BAAf,uBACE,aAAK,SAAS,CAAC,wBAAf,wBACE,WAAI,SAAS,CAAC,sBAAd,yDADF,cAIE,YAAK,SAAS,CAAC,kBAAf,uBACE,KAAC,WAAD,EACC,WAAW,CAAC,8CADb,CAEC,SAAS,CAAC,QAFX,CAGC,WAAW,CAAET,WAHd,CAIC,QAAQ,CAAE,kBAAAW,KAAK,QAAIE,CAAAA,kBAAkB,CAACF,KAAD,CAAtB,EAJhB,EADF,EAJF,cAYE,MAAC,YAAD,EACE,MAAM,CAAEb,OAAO,CAACD,QADlB,CAEE,IAAI,CAAE,EAFR,CAIE,eAAe,KAJjB,wBAME,KAAC,SAAD,EACE,WAAW,CAAC,0EADd,CAEE,GAAG,CAAC,oDAFN,EANF,cAUE,KAAC,MAAD,EAAQ,QAAQ,CAAEC,OAAO,CAACD,QAA1B,uBACE,KAAC,KAAD,WACGC,OAAO,CAACW,KADX,EADF,EAVF,GAGOX,OAAO,CAACD,QAAR,CAAiBJ,GAHxB,CAZF,GADF,EADF,CAiCD,CACD,cAAeE,CAAAA,aAAf","sourcesContent":["import { useState } from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\r\nimport AsyncSelect from 'react-select/async';\r\nimport { fetchLocalMapBox } from '../api';\r\nimport { OrderLocationData } from './types';\r\n\r\nconst initialPosition = {\r\n  lat: -25.5186292,\r\n  lng: -49.2317634\r\n}\r\n\r\ntype Place = {\r\n  label?: string;\r\n  value?: string;\r\n  position: {\r\n    lat: number;\r\n    lng: number;\r\n  }\r\n}\r\n\r\ntype Props = {\r\n  onChangeLocation: (location: OrderLocationData) => void;\r\n}\r\n\r\nfunction OrderLocation({ onChangeLocation }: Props) {\r\n  const [address, setAddress] = useState<Place>({\r\n    position: initialPosition\r\n  });\r\n\r\n  const loadOptions = async (inputValue: string, callback: (places: Place[]) => void) => {\r\n    const response = await fetchLocalMapBox(inputValue);\r\n  \r\n    const places = response.data.features.map((item: any) => {\r\n      return ({\r\n        label: item.place_name,\r\n        value: item.place_name,\r\n        position: {\r\n          lat: item.center[1],\r\n          lng: item.center[0]\r\n        }\r\n        \r\n      });\r\n    });\r\n  \r\n    callback(places);\r\n  };\r\n  \r\n  const handleChangeSelect = (place: Place) => {\r\n    setAddress(place);\r\n    onChangeLocation({\r\n      latitude: place.position.lat,\r\n      longitude: place.position.lng,\r\n      address: place.label!\r\n    });\r\n  };\r\n  \r\n\r\n  return (\r\n    <div className=\"order-location-container\">\r\n      <div className=\"order-location-content\">\r\n        <h3 className=\"order-location-title\">\r\n          Selecione onde o pedido  deve ser entregue:\r\n        </h3>\r\n        <div className=\"filter-container\">\r\n          <AsyncSelect \r\n           placeholder=\"DIGITE UM ENDEREÃ‡O PARA ENTREGAR O PEDIDO\"\r\n           className='filter'\r\n           loadOptions={loadOptions}\r\n           onChange={value => handleChangeSelect(value as Place)}\r\n          />\r\n        </div>\r\n        <MapContainer \r\n          center={address.position} \r\n          zoom={13}\r\n          key={address.position.lat} \r\n          scrollWheelZoom\r\n          >\r\n          <TileLayer\r\n            attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n          />\r\n          <Marker position={address.position}>\r\n            <Popup>\r\n              {address.label}\r\n      </Popup>\r\n          </Marker>\r\n        </MapContainer>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nexport default OrderLocation;"]},"metadata":{},"sourceType":"module"}